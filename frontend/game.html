<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game - Drawing Game</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/game.css">
</head>
<body>
    <div class="game-container">
        <!-- Top Bar -->
        <header class="game-header">
            <div class="game-info-left">
                <span class="round-info">
                    <span class="label">Round</span>
                    <span class="value"><span id="currentRound">1</span>/3</span>
                </span>
                <span class="room-code-info">
                    <span class="label">Room:</span>
                    <span class="value" id="gameRoomCode"></span>
                </span>
            </div>
            
            <div class="timer-section">
                <div class="timer-wrapper">
                    <div class="timer" id="timer">
                        <span class="timer-value">60</span>
                    </div>
                </div>
                
                <div class="word-display" id="wordDisplay" style="display: none;">
                    <span class="word-label">Your word:</span>
                    <span class="word" id="currentWord"></span>
                </div>
                
                <div class="category-display" id="categoryDisplay">
                    <span class="category-label">Category:</span>
                    <span class="category-value" id="currentCategory">-</span>
                </div>
            </div>

            <div class="game-info-right">
                <button id="leaveGameBtn" class="btn btn-small btn-danger">
                    üö™ Leave
                </button>
            </div>
        </header>

        <!-- Main Game Area -->
        <div class="game-main">
            <!-- Left Sidebar - Scoreboard -->
            <aside class="scoreboard">
                <h3 class="scoreboard-title">üèÜ Scoreboard</h3>
                <div id="scoreboardList" class="scoreboard-list">
                    <!-- Scores will be added dynamically -->
                </div>
            </aside>

            <!-- Center - Canvas Area -->
            <main class="canvas-area">
                <div class="canvas-wrapper">
                    <canvas id="drawingCanvas" width="800" height="600"></canvas>
                    
                    <!-- Reactions Overlay -->
                    <div id="reactions" class="reactions-overlay"></div>
                    
                    <!-- Drawing Tools (visible only for drawer) -->
                    <div id="drawingTools" class="drawing-tools" style="display: none;">
                        <div class="tools-row">
                            <div class="tool-group">
                                <label for="colorPicker">Color:</label>
                                <input type="color" id="colorPicker" value="#000000" class="color-picker">
                            </div>
                            
                            <div class="tool-group">
                                <label for="brushSize">Size:</label>
                                <input type="range" id="brushSize" min="1" max="20" value="3" class="brush-slider">
                                <span id="brushSizeValue" class="size-value">3</span>
                            </div>
                            
                            <div class="tool-buttons">
                                <button id="eraserBtn" class="btn btn-tool" title="Eraser">
                                    üßπ
                                </button>
                                <button id="clearBtn" class="btn btn-tool" title="Clear canvas">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Status Message Overlay -->
                    <div id="statusMessage" class="status-message" style="display: none;">
                        <p class="status-text">Waiting for game to start...</p>
                    </div>

                    <!-- Turn Indicator -->
                    <div id="turnIndicator" class="turn-indicator" style="display: none;">
                        <p class="turn-text"></p>
                    </div>
                </div>

                <!-- Emoji Reactions Bar -->
                <div class="emoji-bar">
                    <button class="emoji-btn" data-emoji="üòÇ" title="Laugh">üòÇ</button>
                    <button class="emoji-btn" data-emoji="‚ù§Ô∏è" title="Love">‚ù§Ô∏è</button>
                    <button class="emoji-btn" data-emoji="üëç" title="Thumbs up">üëç</button>
                    <button class="emoji-btn" data-emoji="üî•" title="Fire">üî•</button>
                    <button class="emoji-btn" data-emoji="üëè" title="Clap">üëè</button>
                    <button class="emoji-btn" data-emoji="üòÆ" title="Wow">üòÆ</button>
                    <button class="emoji-btn" data-emoji="ü§î" title="Thinking">ü§î</button>
                    <button class="emoji-btn" data-emoji="üòç" title="Heart eyes">üòç</button>
                </div>
            </main>

            <!-- Right Sidebar - Chat -->
            <aside class="chat-section">
                <h3 class="chat-title">üí¨ Chat & Guesses</h3>
                <div id="chatMessages" class="chat-messages">
                    <div class="chat-welcome">
                        <p>Type your guesses in the chat!</p>
                        <p class="chat-hint">‚ö° Faster guesses = more points</p>
                    </div>
                </div>
                <form id="chatForm" class="chat-input-form">
                    <input 
                        type="text" 
                        id="chatInput" 
                        class="chat-input-field"
                        placeholder="Type your guess..." 
                        maxlength="100"
                        autocomplete="off"
                    >
                    <button type="submit" class="btn btn-send">
                        üì§
                    </button>
                </form>
            </aside>
        </div>
    </div>

    <!-- Turn Transition Modal -->
    <div id="turnModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <h2 id="modalTitle" class="modal-title">‚è±Ô∏è Turn Ended!</h2>
            <p id="modalMessage" class="modal-message">
                The word was: <strong id="revealedWord" class="revealed-word"></strong>
            </p>
            <div id="roundScores" class="round-scores">
                <!-- Round scores will be displayed here -->
            </div>
            <p class="modal-timer">
                Next turn in <span id="modalTimer" class="countdown">3</span> seconds...
            </p>
        </div>
    </div>

    <!-- Game End Modal -->
    <div id="gameEndModal" class="modal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-large">
            <h2 class="modal-title">üéâ Game Over!</h2>
            <div id="winnerAnnouncement" class="winner-announcement">
                <!-- Winner will be displayed here -->
            </div>
            <div id="finalScores" class="final-scores">
                <!-- Final scores will be displayed here -->
            </div>
            <div class="modal-actions">
                <button id="playAgainBtn" class="btn btn-primary btn-large">
                    üîÑ Play Again
                </button>
                <button id="backToHomeBtn" class="btn btn-secondary btn-large">
                    üè† Back to Home
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="js/socket-client.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/reactions.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/scoreboard.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        // Get room code from URL
        const urlParams = new URLSearchParams(window.location.search);
        const roomCode = urlParams.get('room');
        
        if (roomCode) {
            document.getElementById('gameRoomCode').textContent = roomCode;
        } else {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>